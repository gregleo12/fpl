# FPL H2H Analytics - Version History

**Project Start:** October 23, 2024
**Versions Covered:** v3.5.0 - v3.6.0
**Date Range:** December 22, 2025

---

## v3.6.0 - Mobile Optimization & UI Polish (Dec 22, 2025)

**Major Release:** Comprehensive mobile optimization and UI improvements across Stats, Players, and Dashboard tabs.

### Features & Improvements

#### K-97: Fix Season Statistics Header
- Fixed completed gameweeks count to exclude current/live GW
- Shortened "Season Statistics - X Gameweeks Completed" â†’ "X GWs Completed"
- Matched nav bar styling with white border and centered alignment

#### K-98: Add Team Name to My Team Header
- Added team name to left side of My Team header bar
- Implemented text truncation with ellipsis for long names
- Responsive sizing (180px desktop, 120px mobile)

#### K-99: Update Stats Team Performance Grid
- Removed redundant name/rank header from Performance section
- Replaced MED stat with RANK (with ordinal suffix: 1st, 2nd, 3rd)
- Clean 2-row grid: PTS/WIN/DRW/LOSS and AVG/HIGH/LOW/RANK

#### Reduce Season Header Spacing
- Decreased margins between "X GWs Completed" and surrounding containers
- Improved visual hierarchy and reduced whitespace

#### K-100: Optimize Players Tab Header Space
- Reduced header from 4 rows to 3 rows (saved ~40px vertical space)
- Moved Filter button inline with view toggle buttons
- New layout: Row 1 (Search), Row 2 (Toggle + Filter), Row 3 (Count)

#### K-101: Match Season GWs Text Style to Players Count
- Removed container styling from "X GWs Completed"
- Matched plain text style (0.875rem, rgba(255,255,255,0.6), 500 weight)
- Consistent styling across tabs

#### K-102: Tighten Players Tab Columns for Mobile
- Reduced column widths to fit all 5 columns on iPhone 12 Pro (390px)
- Player column: 130px â†’ 90px (-40px)
- Data columns: padding 8px 4px â†’ 6px 3px, min-width 48px â†’ 45px
- Total savings: ~103px (410px â†’ 307px)
- Eliminated horizontal scroll on mobile

#### K-103: Shorten GW Labels in Tables
- Removed "GW" prefix from gameweek labels in table cells
- Changed "GW17" â†’ "17" (saved ~17px per cell)
- Headers retain "GW" for context

### Files Modified
- `src/app/api/league/[id]/stats/season/route.ts`
- `src/components/Stats/SeasonView.tsx`
- `src/components/Stats/SeasonView.module.css`
- `src/components/Dashboard/MyTeamTab.tsx`
- `src/components/Dashboard/Dashboard.module.css`
- `src/components/Stats/MyTeamView.tsx`
- `src/components/Players/PlayersTab.tsx`
- `src/components/Players/PlayersTab.module.css`

### Impact
- âœ… Significantly improved mobile experience (390px screens)
- âœ… Reduced vertical space usage (~40px in Players tab)
- âœ… Reduced horizontal space requirements (~120px total savings)
- âœ… Consistent styling across all tabs
- âœ… Better visual hierarchy and readability

---

## v3.5.18 - Shorten GW Labels in Tables (K-103) (Dec 22, 2025)

**Mobile Optimization:** Removed "GW" prefix from gameweek labels in table cells to save horizontal space. Headers retain "GW" for context.

### Problem

Table cells showing "GW17", "GW3", etc. consumed unnecessary horizontal space on mobile devices.

**Space Usage:**
- "GW17": ~35px width
- "17": ~18px width
- **Savings:** ~17px per cell

### Solution

Removed "GW" prefix from gameweek values in table cells while keeping headers labeled "GW" for context.

**Changes (`src/components/Stats/MyTeamView.tsx`):**

**Chips Played Table (Line 219):**
```tsx
<td>{chip.event}</td>  // Was: <td>GW{chip.event}</td>
```

**Chips Faced Table (Line 289):**
```tsx
<td>{chip.event}</td>  // Was: <td>GW{chip.event}</td>
```

**Match History Table (Line 338):**
```tsx
<td>{match.event}</td>  // Was: <td>GW{match.event}</td>
```

### Result

- âœ… All tables show gameweek numbers without "GW" prefix
- âœ… Headers still show "GW" for context
- âœ… Saved ~17px horizontal space per cell
- âœ… Better mobile readability

**Files Modified:**
- `src/components/Stats/MyTeamView.tsx`

---

## v3.5.17 - Tighten Players Tab Columns for Mobile (K-102) (Dec 22, 2025)

**Mobile Optimization:** Reduced column widths to fit all 5 columns (PLAYER, Â£, %, PT, FORM) on iPhone 12 Pro (390px) without horizontal scroll.

### Problem

On iPhone 12 Pro (390px width), the FORM column was partially cut off showing "FO" instead of "FORM". Horizontal scroll was needed to see all data.

**Columns too wide:**
- PLAYER: 130px
- Data columns: 48px min-width, 8px 4px padding
- Total: ~410px (exceeds 366px usable width)

### Solution

Tightened all column widths to fit within 390px screen:

**CSS Changes (`src/components/Players/PlayersTab.module.css` @ 480px breakpoint):**

**Player Column (130px â†’ 90px):**
- `.playerHeader`, `.playerCell`: `width: 90px` (was 130px)
- `.playerName`: `max-width: 70px` (was 90px)
- `.playerInfo`: `gap: 6px` (was 8px)
- `.jersey`: `26px` (was 28px)
- `.positionBadge`: `padding: 1px 4px` (was 1px 5px)

**Data Columns (tighter padding/sizing):**
- `.statHeader`, `.statsCell`: `padding: 6px 3px` (was 8px 4px)
- `.statHeader`: `min-width: 45px` (was 48px)
- `.statHeader`: `font-size: 0.625rem` (was 0.6875rem)
- `.statsCell`: `font-size: 0.7rem` (was 0.75rem)

**New Total Width: ~307px** (fits comfortably in 366px usable width)

### Column Width Distribution (Mobile 390px)

| Column | Before | After | Savings |
|--------|--------|-------|---------|
| PLAYER | 130px | 90px | -40px |
| Â£ | ~70px | ~55px | -15px |
| % | ~70px | ~58px | -12px |
| PT | ~70px | ~52px | -18px |
| FORM | ~70px | ~52px | -18px |
| **Total** | ~410px | ~307px | -103px |

### Files Modified

- `src/components/Players/PlayersTab.module.css` (tightened mobile columns @ 480px)

### Result

âœ… All 5 columns visible on 390px width
âœ… No horizontal scroll needed
âœ… FORM column fully visible (not cut off)
âœ… Player names still readable (70px max-width with truncation)
âœ… Saved ~103px total width
âœ… Fits iPhone SE (320px), 12 Pro (390px), Pro Max (430px)

**After:**
```
PLAYER   Â£     %     PTâ†“  FORM
Haaland  15.0m 73.3% 135  6.6
```

---

## v3.5.16 - Match Season GWs Text Style to Players Count (K-101) (Dec 22, 2025)

**UI Consistency:** Removed container around "16 GWs Completed" and styled it as plain text to match "Showing 760 of 760 players".

### Problem

Season tab showed "16 GWs Completed" in a dark container box with white text, while Players tab showed "Showing 760 of 760 players" as simple grey text with no container.

**Before:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      16 GWs Completed               â”‚  â† White text in dark box
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Solution

Removed all container styling and matched the text style to Players tab.

**Component Changes (`src/components/Stats/SeasonView.tsx`):**
- Removed inner `<span className={styles.seasonGW}>` wrapper
- Text now directly in `.seasonInfo` div

**CSS Changes (`src/components/Stats/SeasonView.module.css`):**
- Removed container styling:
  - `background: rgba(0, 0, 0, 0.3)` â†’ removed
  - `border: 1px solid rgba(255, 255, 255, 0.1)` â†’ removed
  - `border-radius: 12px` â†’ removed
  - `padding: 0.5rem 1rem` â†’ removed
- Updated text styling to match Players tab:
  - `font-size: 0.875rem` (14px)
  - `color: rgba(255, 255, 255, 0.6)` (muted grey)
  - `font-weight: 500`
  - `margin-bottom: 1rem`
- Removed `.seasonGW` class (no longer used)

### Files Modified

- `src/components/Stats/SeasonView.tsx` (removed inner span)
- `src/components/Stats/SeasonView.module.css` (removed container, matched text style)

### Result

âœ… Removed container around "16 GWs Completed"
âœ… Matched text style to Players tab (muted grey, no box)
âœ… Consistent styling across tabs
âœ… Cleaner, less cluttered appearance
âœ… Same font size, color, and weight as Players count

**After:**
```
16 GWs Completed               â† Light grey text, no container
```

---

## v3.5.15 - Optimize Players Tab Header Layout (K-100) (Dec 22, 2025)

**UI Optimization:** Reduced vertical space in Players tab header from 4 rows to 3 rows while maintaining mobile usability.

### Problem

Players tab header used excessive vertical space (~160px) with 4 rows:
1. "All Players" title + Filter button
2. "Showing X of Y players"
3. Search bar
4. View toggle buttons (Compact Stats / All Stats)

### Solution

**Reorganized to 3 rows (~120px, saves ~40px):**
1. **Search bar** - Full width, first element for easy touch
2. **View toggle + Filter** - Compact/All Stats on left, Filter on right
3. **Player count** - Small text below controls

**Component Changes (`src/components/Players/PlayersTab.tsx`):**
- Removed "All Players" title (context clear from being on Players tab)
- Moved Filter button inline with view toggle buttons
- Restructured header layout to new 3-row format

**CSS Changes (`src/components/Players/PlayersTab.module.css`):**
- Removed `.header`, `.headerTop`, `.title` styles (no longer used)
- Added `.controlsRow` with flexbox layout (`justify-content: space-between`)
- Updated `.viewToggle` to work inside controls row (removed bottom margin)
- Added margin-bottom to `.subtitle` for spacing

### Layout Structure

```
Row 1: [Search bar - full width]
Row 2: [Compact Stats] [All Stats] â†â”€â”€â”€â”€â†’ [Filter]
Row 3: Showing X of 760 players
```

### Files Modified

- `src/components/Players/PlayersTab.tsx` (restructured header layout)
- `src/components/Players/PlayersTab.module.css` (updated styles)

### Result

âœ… Reduced header from 4 rows to 3 rows
âœ… Saved ~40px vertical space
âœ… Search bar at top for easy mobile touch
âœ… Filter button inline with toggle buttons
âœ… Player count visible below controls
âœ… More efficient use of screen space

---

## v3.5.14 - Reduce Season Header Spacing (Dec 22, 2025)

**UI Polish:** Reduced margins around "16 GWs Completed" container to match section spacing.

### Problem

The "16 GWs Completed" header had inconsistent spacing:
- Too much space below (1rem margin-bottom)
- Sections had excessive margin-bottom (3rem)
- Didn't match the standard section gap (0.75rem)

### Solution

**Adjusted Spacing (`src/components/Stats/SeasonView.module.css`):**
- `.seasonInfo` margin-bottom: `1rem` â†’ `0.75rem`
- `.section` margin-bottom: `3rem` â†’ `0` (last element, no bottom margin needed)

### Files Modified

- `src/components/Stats/SeasonView.module.css` (reduced margins)

### Result

âœ… Consistent spacing around "16 GWs Completed" container
âœ… Matches standard section gap (0.75rem)
âœ… Removed excessive bottom margin from leaderboards section
âœ… Cleaner, more balanced layout

---

## v3.5.13 - Update Stats Team Performance Grid (K-99) (Dec 22, 2025)

**UI Simplification:** Removed name/rank header and replaced MED with RANK in Performance grid.

### Changes

**1. Removed Name/Rank Header Container**
Deleted entire section showing manager name, team name, and rank badge. This was redundant since:
- User already knows they're viewing their own team
- Rank is now displayed in the Performance grid

**Before:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Greg Lienart                    2nd     â”‚
â”‚ FC Matos â˜…                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. Updated Performance Grid (Row 2)**
Replaced MED (median) with RANK at position 4:

| Position | Before | After |
|----------|--------|-------|
| Col 1 | AVG | AVG (unchanged) |
| Col 2 | HIGH | HIGH (unchanged) |
| Col 3 | MED | LOW (moved from col 4) |
| Col 4 | LOW | RANK (new) |

**RANK Formatting:**
- Value: "1st", "2nd", "3rd", "4th", etc. (ordinal suffix)
- Label: "RANK"
- Uses existing `getOrdinalSuffix()` helper
- Same styling as other stat boxes

### Files Modified

- `src/components/Stats/MyTeamView.tsx` (removed header, updated grid)

### Result

âœ… Removed redundant name/rank header container
âœ… Replaced MED with RANK in bottom-right position
âœ… Row 2 now shows: AVG, HIGH, LOW, RANK
âœ… Cleaner, more focused Performance section
âœ… Rank displayed with ordinal suffix (e.g., "2nd")

**After:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PERFORMANCE                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 1072 â”‚ â”‚  13  â”‚ â”‚  0   â”‚ â”‚  4   â”‚    â”‚
â”‚ â”‚ PTS  â”‚ â”‚ WIN  â”‚ â”‚ DRW  â”‚ â”‚ LOSS â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 63.1 â”‚ â”‚  95  â”‚ â”‚  32  â”‚ â”‚ 2nd  â”‚    â”‚
â”‚ â”‚ AVG  â”‚ â”‚ HIGH â”‚ â”‚ LOW  â”‚ â”‚ RANK â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## v3.5.12 - Add Team Name to My Team Header (K-98) (Dec 22, 2025)

**UI Enhancement:** Added team name to the left side of the My Team header bar, matching the Rivals layout.

### Problem

My Team header had empty left side while Rivals shows "H2H | Fixtures" on the left:

**Before:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (empty)                   [â—„]  GW 17  â—  [â–º]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Solution

Added team name to left group with truncation for long names:

**Component (`src/components/Dashboard/MyTeamTab.tsx`):**
- Added team name to `.leftGroup` div
- Uses `myTeamName` prop (already available)
- New `.teamNameHeader` class for styling

**Styles (`src/components/Dashboard/Dashboard.module.css`):**
- Desktop: `max-width: 180px` with ellipsis truncation
- Mobile: `max-width: 120px` with smaller font size
- `font-size: 0.9375rem` (desktop), `0.875rem` (mobile)
- `font-weight: 600`, `color: white`
- `text-overflow: ellipsis` for long names

### Files Modified

- `src/components/Dashboard/MyTeamTab.tsx` (add team name to left group)
- `src/components/Dashboard/Dashboard.module.css` (add `.teamNameHeader` styles)

### Result

âœ… Team name displayed on left (e.g., "FC Matos")
âœ… Truncates with ellipsis if too long (e.g., "SalahMoLeykou...")
âœ… Never wraps to 2 lines
âœ… Doesn't interfere with GW selector
âœ… Responsive sizing (180px desktop, 120px mobile)

**After:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FC Matos                  [â—„]  GW 17  â—  [â–º]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## v3.5.11 - Fix Season Statistics Header (K-97) (Dec 22, 2025)

**UI & Data Fix:** Fixed Season Statistics header to show correct count, shortened text, and match nav bar styling.

### Problems

1. Text too long: "17 Gameweeks Completed" is wordy
2. Wrong count: Shows 17 (current GW) instead of 16 (completed GWs only)
3. Redundant title: "SEASON STATISTICS" label unnecessary
4. Inconsistent styling: Yellow border doesn't match nav bar design

### Solution

**API Route (`src/app/api/league/[id]/stats/season/route.ts`):**
- Added `completedGameweeksCount` variable to count only FINISHED gameweeks
- Filters bootstrap events by `e.finished` (not `e.is_current || e.finished`)
- Returns correct count of completed GWs, excluding live/current GW

**Component (`src/components/Stats/SeasonView.tsx`):**
- Removed "Season Statistics" label span
- Changed text from "X Gameweeks Completed" â†’ "X GWs Completed"
- Centered text in container

**Styles (`src/components/Stats/SeasonView.module.css`):**
- Updated `.seasonInfo` to match nav bar styling:
  - `border: 1px solid rgba(255, 255, 255, 0.1)` (neutral border)
  - `padding: 0.5rem 1rem` (match nav bar)
  - `justify-content: center` (center text)
- Updated `.seasonGW`:
  - `color: white` (neutral text color)
  - `font-size: 0.9375rem` (match nav bar)
- Removed `.seasonLabel` styles (no longer used)

### Files Modified

- `src/app/api/league/[id]/stats/season/route.ts` (count only finished GWs)
- `src/components/Stats/SeasonView.tsx` (remove label, shorten text)
- `src/components/Stats/SeasonView.module.css` (match nav bar styling)

### Result

âœ… Shows correct completed GWs count (16, not 17)
âœ… Shortened text: "16 GWs Completed" instead of "16 Gameweeks Completed"
âœ… Removed redundant "Season Statistics" title
âœ… Neutral styling matches nav bar (white border, centered)
âœ… API now filters to only finished gameweeks

---

## v3.5.10 - Match Stats Tabs Spacing to Rivals (K-96) (Dec 22, 2025)

**UI Fix:** Increased vertical padding in Stats tabs container to match Rivals header bar height.

### Problem

Stats tabs header bar appeared slightly shorter/thinner than Rivals header bar due to insufficient padding:
- Stats: `padding: 0.25rem` (4px all around)
- Rivals: `padding: 0.5rem 1rem` (8px top/bottom, 16px left/right)

This made the Stats tabs feel cramped vertically compared to Rivals.

### Solution

Updated Stats `.viewToggleBar` padding to match Rivals `.rivalsHeader` exactly:

**Desktop:**
```css
.viewToggleBar {
  padding: 0.5rem 1rem;  /* 8px top/bottom, 16px left/right */
}
```

**Mobile (@media max-width: 640px):**
```css
.viewToggleBar {
  padding: 0.5rem 0.75rem;  /* 8px top/bottom, 12px left/right */
}
```

### Files Modified

- `src/components/Stats/StatsHub.module.css` (updated padding on desktop and mobile)

### Result

âœ… Stats tabs header now has identical height to Rivals header
âœ… Desktop: 0.5rem 1rem padding (8px vertical, 16px horizontal)
âœ… Mobile: 0.5rem 0.75rem padding (8px vertical, 12px horizontal)
âœ… Better visual consistency across tabs
âœ… More breathing room around tab badges

**Before:** `padding: 0.25rem` â†’ Header felt tight
**After:** `padding: 0.5rem 1rem` â†’ Matches Rivals exactly

---

## v3.5.9 - Consolidate Performance Stats to 8 (K-95) (Dec 22, 2025)

**Data Optimization:** Merged Performance and Season Stats sections into one consolidated Performance section with 8 carefully chosen stats in a 4x2 grid.

### Problem

Stats > Team view had 12 stats across 2 sections:
- PERFORMANCE (8 stats): PLY, PTS, +/-, AVG, WIN, DRW, LSS, TOT
- SEASON STATS (4 stats): Highest Score, Lowest Score, Biggest Win, Biggest Loss

This was too many stats with some redundancy and less useful metrics.

### Solution

**Consolidated into 8 essential stats in 2 rows:**

**Row 1 - Match Results:**
- PTS (total points)
- WIN (wins)
- DRW (draws)
- LOSS (losses - renamed from LSS)

**Row 2 - Score Distribution:**
- AVG (average points per GW)
- HIGH (highest GW score - renamed from "Highest Score")
- MED (median GW score - NEW)
- LOW (lowest GW score - renamed from "Lowest Score")

**Stats Removed:**
- PLY (played) - redundant, can calculate from W+D+L
- +/- (point differential) - less useful metric
- TOT (total H2H points) - confusing metric
- Biggest Win - nice to have but not essential
- Biggest Loss - nice to have but not essential

**New Stat Added:**
- **MED (Median)** - Calculated from all GW scores:
  ```typescript
  // Sort scores and find middle value
  const sortedScores = [...scores].sort((a, b) => a - b);
  const mid = Math.floor(sortedScores.length / 2);
  if (sortedScores.length % 2 === 0) {
    medianScore = (sortedScores[mid - 1] + sortedScores[mid]) / 2;
  } else {
    medianScore = sortedScores[mid];
  }
  ```

### Files Modified

- `src/app/api/player/[id]/route.ts` (added median calculation)
- `src/components/Stats/MyTeamView.tsx` (consolidated stats grid, removed Season Stats section)

### Result

âœ… Performance section now has 8 focused stats in 4x2 grid
âœ… Season Stats section completely removed
âœ… New MED (median) stat provides better score distribution insight
âœ… Labels updated: LSS â†’ LOSS, Highest Score â†’ HIGH, Lowest Score â†’ LOW
âœ… Cleaner, more focused stats display
âœ… Removed redundant and less useful metrics

**Visual Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PERFORMANCE                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ 1072 â”‚ â”‚  13  â”‚ â”‚   0  â”‚ â”‚   4  â”‚       â”‚
â”‚  â”‚ PTS  â”‚ â”‚ WIN  â”‚ â”‚ DRW  â”‚ â”‚ LOSS â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ 63.1 â”‚ â”‚  95  â”‚ â”‚  65  â”‚ â”‚  32  â”‚       â”‚
â”‚  â”‚ AVG  â”‚ â”‚ HIGH â”‚ â”‚ MED  â”‚ â”‚ LOW  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## v3.5.8 - Style Stats Tabs to Match Rivals (K-94) (Dec 22, 2025)

**UI Enhancement:** Applied Rivals tab styling to Stats view toggle tabs with icons and badge backgrounds.

### Problem

Stats tab buttons (Team, GW, Season, Players) had plain text styling:
- No badge/pill backgrounds
- No icons
- Different visual hierarchy than Rivals tabs
- Inconsistent styling across app

### Solution

**Applied EXACT Rivals tab styling:**

**Added Icons (Lucide React):**
- Team: `Home` icon (house)
- GW: `BarChart2` icon (bar chart)
- Season: `Trophy` icon (trophy)
- Players: `Shirt` icon (jersey)

**CSS Updates - EXACT COPY from Rivals:**
```css
.subTab {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.6);
  padding: 0.5rem 1rem;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.subTabActive {
  background: rgba(0, 255, 135, 0.2) !important;
  color: #00ff87 !important;
  border: 1px solid rgba(0, 255, 135, 0.3) !important;
}
```

**Mobile Responsive:**
```css
@media (max-width: 640px) {
  .subTab {
    font-size: 0.875rem;
    padding: 0.5rem 0.5rem;
  }
}
```

### Files Modified

- `src/components/Stats/StatsHub.tsx` (added icons, updated class names to `.subTab`/`.subTabActive`)
- `src/components/Stats/StatsHub.module.css` (copied `.subTab` styling from Rivals, added mobile overrides)

### Result

âœ… Stats tabs now match Rivals tabs exactly:
- Badge/pill backgrounds with borders
- Icons before text (16px size)
- Selected tab: Green tint (#00ff87) with green border
- Non-selected tab: Grey text with subtle border
- Hover state: Lighter background

âœ… Desktop: 0.5rem 1rem padding, 0.9375rem font-size
âœ… Mobile: 0.5rem padding, 0.875rem font-size
âœ… Icons scale with flex-shrink: 0
âœ… All transitions smooth (0.2s ease)

**Visual Result:**
```
Before: Team   GW   Season   Players
After:  [ğŸ  Team]  [ğŸ“Š GW]  [ğŸ† Season]  [ğŸ‘• Players]
```

---

## v3.5.7 - Two-Bar Layout for Stats Tab (K-94) (Dec 22, 2025)

**Major Structure Change:** Restructured Stats tab to use TWO separate navigation bars stacked vertically.

### Problem

Stats tab had a different structure than needed:
- View toggle and GW selector were combined in one bar (not what was requested)
- Should be two separate bars: one always visible, one conditional

### Solution

**Two separate bars stacked vertically:**

**Bar 1 - View Toggle (always visible):**
```tsx
<div className={styles.viewToggleBar}>
  <button className={styles.viewTab}>Team</button>
  <button className={styles.viewTab}>GW</button>
  <button className={styles.viewTab}>Season</button>
  <button className={styles.viewTab}>Players</button>
</div>
```

**Bar 2 - GW Selector (only shows when GW view active):**
```tsx
{view === 'gameweek' && (
  <div className={styles.gwSelectorBar}>
    <button className={styles.refreshButton}>â†»</button>
    <button className={styles.navButton}>â—„</button>
    <div className={styles.gwInfo}>
      <span className={styles.gwNumber}>GW {selectedGW}</span>
      <span className={styles.liveDot}></span>
    </div>
    <button className={styles.navButton}>â–º</button>
  </div>
)}
```

**CSS Structure:**
- `.viewToggleBar` - First bar with view tabs (Team/GW/Season/Players)
- `.gwSelectorBar` - Second bar with GW selector (only visible on GW view)
- GW selector bar uses same styling as Rivals/My Team unified bar
- Both bars have consistent styling (40px buttons desktop, 32px mobile)
- **Mobile media query placed AFTER desktop styles** to properly override

### Files Modified

- `src/components/Stats/StatsHub.tsx` (two separate bar containers)
- `src/components/Stats/StatsHub.module.css` (separate CSS for each bar, mobile media query at end)

### Result

âœ… Two separate navigation bars stacked vertically
âœ… Bar 1 (view toggle) always visible
âœ… Bar 2 (GW selector) only shows when GW view is active
âœ… GW selector bar matches Rivals/My Team styling exactly
âœ… Desktop: 40px buttons, 0.9375rem font-size
âœ… Mobile: 32px buttons, 0.875rem font-size, refresh button hidden
âœ… Mobile media query correctly placed at end to override desktop styles

---

## v3.5.6 - Fix My Team Mobile Button Sizing (K-93) (Dec 22, 2025)

**HOTFIX:** Fixed mobile responsive CSS not applying due to incorrect CSS cascade order.

### Problem

After K-91, My Team mobile buttons were still 40px (desktop size) instead of 32px, and refresh button was still showing on mobile despite CSS supposedly hiding it.

**Symptoms:**
- Buttons stayed 40px on mobile (should be 32px)
- Refresh button visible on mobile (should be hidden)
- My Team header taller than Rivals on mobile
- Mobile CSS appeared correct in file but wasn't being applied

### Root Cause

**CSS CASCADE ORDER BUG:** The mobile media query was placed BEFORE the desktop button styles in the CSS file:

```
Line 1151: @media (max-width: 640px) { ... }  â† Mobile styles
Line 1169: .refreshButton { display: none; }
Line 1172: } â† End media query
Line 1203: .refreshButton { width: 40px; height: 40px; }  â† Desktop styles OVERRIDE mobile!
```

In CSS, later rules override earlier rules. The desktop styles at line 1203 came AFTER the media query, so they overrode the mobile `display: none` rule.

### Solution

**Moved media query to END of CSS file** (after all desktop button styles) at line 1256-1276:

```css
/* Desktop styles FIRST */
.navButton { width: 40px; height: 40px; }
.refreshButton { width: 40px; height: 40px; }
.gwNumber { font-size: 0.9375rem; }

/* Mobile media query LAST - properly overrides desktop */
@media (max-width: 640px) {
  .myTeamHeader {
    padding: 0.5rem 0.75rem;
    gap: 0.75rem;
  }

  .gwNumber {
    font-size: 0.875rem;
  }

  .navButton {
    width: 32px;
    height: 32px;
    font-size: 0.875rem;
  }

  .refreshButton {
    display: none;  /* â† Now properly hides button */
  }
}
```

**Key Learning:** In CSS, media queries MUST come AFTER the default styles they're meant to override, not before.

### Files Modified

- `src/components/Dashboard/Dashboard.module.css` (moved media query from line 1151 to line 1256)

### Result

âœ… Refresh button now properly hidden on mobile (was showing before)
âœ… Nav buttons now 32px on mobile (were 40px before)
âœ… GW number now 0.875rem on mobile (was 0.9375rem before)
âœ… My Team header height now matches Rivals exactly on mobile
âœ… Media query properly overrides desktop styles due to correct cascade order

---

## v3.5.5 - Copy Rivals Header to My Team (K-91) (Dec 22, 2025)

**Major Structure Change:** Replaced My Team's standalone GW selector with the EXACT same full-width header bar structure used in Rivals tab.

### Problem

My Team used a standalone `<GWSelector>` component that:
- Had `margin-left: auto` positioning (right-aligned)
- Didn't span full width like Rivals
- Looked disconnected from the overall design
- Used different CSS structure than Rivals

### Solution

**EXACT COPY** of Rivals header structure to My Team:

**Same HTML structure:**
```tsx
<div className={styles.myTeamHeader}>
  <div className={styles.leftGroup}></div>  {/* Empty - no tabs */}
  <div className={styles.rightGroup}>
    {/* Refresh + GW selector */}
  </div>
</div>
```

**Same CSS values** (copied from `Fixtures.module.css`):
- Container: `display: flex`, `justify-content: space-between`
- Background: `rgba(0, 0, 0, 0.3)`
- Border: `1px solid rgba(255, 255, 255, 0.1)`
- Border-radius: `12px`
- Padding: `0.5rem 1rem`
- Gap: `1rem` (desktop), `0.75rem` (mobile)
- All button sizes: `40px Ã— 40px`
- All font sizes: `0.9375rem`

### What Changed

**Before:**
```
                  [Refresh] [â—„] GW 17 â— [â–º]  (right-aligned, auto margin)
```

**After:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (empty)                   [â—„]  GW 17  â—  [â–º]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Same full-width bar as Rivals, just without the H2H/Fixtures tabs on the left.

### Files Changed

- `src/components/Dashboard/MyTeamTab.tsx` â†’ Removed `<GWSelector>` import, added inline header structure with `RotateCw` icon
- `src/components/Dashboard/Dashboard.module.css` â†’ Added `.myTeamHeader`, `.leftGroup`, `.rightGroup`, `.navButton`, `.refreshButton`, `.gwInfo`, `.gwNumber`, `.liveDot` classes (exact copy from Rivals)

### Result

- âœ… My Team header now spans **full width** edge-to-edge
- âœ… Identical structure and styling to Rivals tab
- âœ… Same dark background, border, border-radius
- âœ… Same button sizes (40px Ã— 40px)
- âœ… Same font sizes (0.9375rem)
- âœ… Same spacing and gaps
- âœ… Left side empty (no tabs), right side has GW selector
- âœ… Consistent, professional appearance across tabs

### Technical Notes

- Removed standalone `GWSelector` component usage
- Inlined all GW selector logic directly in MyTeamTab
- Used `RotateCw` from lucide-react for refresh button
- CSS classes named `.myTeamHeader` (vs Rivals' `.rivalsHeader`) but exact same values
- Empty `.leftGroup` div maintained for structural consistency

---

## v3.5.4 - Fix GW Selector SIZE (K-90 - K-89 Follow-up) (Dec 22, 2025)

**Critical Fix:** K-89 only fixed cosmetic elements (arrows, dot). This fix addresses the actual sizing inconsistencies that made bars look different heights.

### Problem

After K-89, GW selectors had inconsistent **dimensions** across tabs:
- **Stats > GW bar:** TALLER than Rivals (larger buttons, larger text)
- **My Team bar:** TALLER than Rivals (larger buttons, larger text)
- **My Team bar:** NOT full width (had alignment issues)

### Root Cause

My Team and Stats tabs had different pixel values than Rivals reference:

| Element | Rivals (Correct) | My Team/Stats (Wrong) |
|---------|------------------|----------------------|
| Container gap | 0.5rem | 0.75rem âŒ |
| Arrow buttons | 40px Ã— 40px | 36px Ã— 36px âŒ |
| Refresh button | 40px Ã— 40px | 36px Ã— 36px âŒ |
| Arrow font-size | 0.9375rem | 1.125rem âŒ |
| GW number font-size | 0.9375rem | 1.5rem âŒ |

### Solution

Extracted **EXACT** pixel values from Rivals CSS and applied them to My Team and Stats:

**Fixed Values:**
```css
/* Container */
.gwSelector {
  gap: 0.5rem;  /* Was 0.75rem */
}

/* Arrow and Refresh Buttons */
.gwButton, .refreshButton {
  width: 40px;   /* Was 36px */
  height: 40px;  /* Was 36px */
  font-size: 0.9375rem;  /* Was 1.125rem */
}

/* GW Number */
.gwNumber {
  font-size: 0.9375rem;  /* Was 1.5rem */
}
```

### Files Changed

- `src/components/PitchView/GWSelector.module.css` â†’ Fixed button sizes, gaps, font sizes
- `src/components/Stats/StatsHub.module.css` â†’ Fixed button sizes, gaps, font sizes

### Result

- âœ… All GW selector bars now have **identical height**
- âœ… All button sizes match exactly (40px Ã— 40px)
- âœ… All font sizes match exactly (0.9375rem for GW, arrows)
- âœ… All spacing matches exactly (0.5rem gap)
- âœ… My Team, Stats, and Rivals bars are visually indistinguishable
- âœ… Professional, pixel-perfect consistency across all tabs

---

## v3.5.3 - Standardize GW Selector Bar Style (K-89) (Dec 22, 2025)

**UI Consistency:** Standardized GW selector styling across all tabs (My Team, Stats, Rivals) to use the same visual design.

### Problem

GW selector bars had inconsistent styling across tabs:
- **Rivals:** Pink pulsing dot for LIVE indicator, `â—„` and `â–º` arrows
- **My Team:** Red "LIVE" text badge, `â†` and `â†’` arrows
- **Stats > GW:** Red "LIVE" text badge, `â†` and `â†’` arrows

This created visual inconsistency and made the UI feel less cohesive.

### Solution

Standardized all GW selectors to use the Rivals design pattern:

**Changes Applied:**
1. **Replaced text "LIVE" badges with pink pulsing dots** across My Team and Stats tabs
2. **Changed arrow characters** from `â†` `â†’` to `â—„` `â–º` for consistency
3. **Added `.liveDot` CSS class** with pink pulsing animation and glow effect
4. **Maintained existing bar styling** (background, border, border-radius)

### Visual Result

All three tabs now show:
```
[â—„]  GW 17  â—  [â–º]
```

Instead of the old mixed styles:
```
[â†]  GW 17  LIVE  [â†’]    (old My Team/Stats)
[â—„]  GW 17  â—  [â–º]       (Rivals - now standard)
```

### Technical Details

**Pink Pulsing Dot CSS:**
```css
.liveDot {
  display: inline-block;
  width: 8px;
  height: 8px;
  background: #ff2882;
  border-radius: 50%;
  animation: livePulse 1.5s ease-in-out infinite;
  margin-left: 8px;
  margin-right: 8px;
}

@keyframes livePulse {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 4px #ff2882, 0 0 8px rgba(255, 40, 130, 0.5);
  }
  50% {
    opacity: 0.6;
    box-shadow: 0 0 8px #ff2882, 0 0 16px rgba(255, 40, 130, 0.7);
  }
}
```

### Files Changed

- `src/components/PitchView/GWSelector.tsx` â†’ Changed arrows and LIVE indicator
- `src/components/PitchView/GWSelector.module.css` â†’ Added `.liveDot` class
- `src/components/Stats/StatsHub.tsx` â†’ Changed arrows and LIVE indicator
- `src/components/Stats/StatsHub.module.css` â†’ Added `.liveDot` class

### Result

- âœ… All GW selectors use consistent pink pulsing dot for LIVE indicator
- âœ… All GW selectors use consistent `â—„` and `â–º` arrow characters
- âœ… Unified visual design across My Team, Stats, and Rivals tabs
- âœ… More professional, cohesive user experience

---

## v3.5.2 - Center Live Dot in GW Selector (K-88) (Dec 22, 2025)

**UI Polish:** Fixed positioning of the pink pulsing "LIVE" dot in the Rivals tab GW selector to be visually centered.

### Problem

The live dot was positioned too close to the right arrow button:
- Current: `GW 17 â— â†’` (dot closer to arrow)
- Expected: `GW 17  â—  â†’` (dot centered in gap)

### Root Cause

The `.liveDot` CSS only had `margin-left: 6px` with no `margin-right`, causing unequal spacing.

### Solution

Added equal margins on both sides of the live dot:
```css
.liveDot {
  margin-left: 8px;   /* Space from GW number */
  margin-right: 8px;  /* Space from right arrow */
}
```

### Files Changed

- `src/components/Fixtures/Fixtures.module.css` â†’ Updated `.liveDot` margins

### Result

- âœ… Live dot now appears visually centered between GW number and right arrow
- âœ… Equal spacing on both sides (8px left, 8px right)
- âœ… Improved visual balance in navigation controls

---

## v3.5.1 - Unified Rivals Nav Bar (K-75) (Dec 22, 2025)

**UI Refactor:** Consolidated Rivals tab navigation into a single unified container, matching the Stats tab pattern.

### Problem

The Rivals tab had two separate containers for navigation:
1. H2H/Fixtures toggle (left)
2. GW selector with navigation (right)

**Issues:**
- Heights didn't match
- On wider screens, left container grew instead of space between groups
- Looked disconnected and inconsistent with Stats tab design

### Solution

Created a unified nav bar with `space-between` layout:
- Single container with consistent background/border
- Left group: H2H / Fixtures toggle
- Right group: Refresh button + GW selector with arrows + live dot
- Space grows in the CENTER between groups on wider screens
- Heights match automatically (same container)

### Design Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [H2H] [Fixtures]                    â—„  GW 17  â—  â–º     â”‚
â”‚  â†‘ left-aligned                         â†‘ right-aligned â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Files Changed

- `src/components/Fixtures/FixturesTab.tsx` â†’ Updated to use unified `.rivalsHeader` structure
- `src/components/Fixtures/Fixtures.module.css` â†’ Added `.rivalsHeader`, `.leftGroup`, `.rightGroup` classes

### Technical Details

**New CSS Classes:**
- `.rivalsHeader` â†’ Unified container with `justify-content: space-between`
- `.leftGroup` â†’ Wrapper for H2H/Fixtures tabs
- `.rightGroup` â†’ Wrapper for refresh + GW navigation

**Deprecated Classes (kept for backwards compatibility):**
- `.header` â†’ Replaced by `.rivalsHeader`
- `.subTabsContainer` â†’ Replaced by `.leftGroup`
- `.navigatorWrapper` â†’ Replaced by `.rightGroup`

### Result

- âœ… Consistent height across entire nav bar
- âœ… Space grows between left and right groups (not on edges)
- âœ… Matches Stats tab unified design pattern
- âœ… Cleaner, more cohesive appearance
- âœ… Mobile responsive with adjusted padding

---

## v3.5.0 - Layout Consistency Release (Dec 22, 2025)

**Minor Version Release:** This release fixes critical layout issues affecting container width consistency across all dashboard tabs.

### Summary of Changes (K-81 through K-87)

This version includes fixes from tasks K-81 through K-87, addressing:
- Container padding inconsistencies
- Dark background shadows between cards
- Width alignment issues between tabs and navigation bar
- Asymmetric spacing on mobile devices

### Key Fixes Included

**K-81:** Removed internal padding from Rivals container
**K-82-K-83:** Removed dark background shadow in Stats > Team tab
**K-84-K-85:** Fixed container width inconsistency using wrapper pattern
**K-86-K-87:** Fixed asymmetric spacing by removing width constraint

### Final Result

All dashboard tabs now have:
- âœ… Consistent 12px edge spacing on mobile
- âœ… Content width matches navigation bar exactly
- âœ… No dark shadows between card elements
- âœ… Symmetric spacing on both left and right sides
- âœ… Clean, unified layout across My Team, Rivals, Rank, Stats, and Settings tabs

### Files Changed

- `src/components/Fixtures/Fixtures.module.css`
- `src/components/Dashboard/Dashboard.module.css`
- `src/app/dashboard/dashboard.module.css`
- `src/app/dashboard/page.tsx`

---

